d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100   1) # -*- coding: utf-8 -*-
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100   2) from collections import defaultdict
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100   3) import mock
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100   4) from searx.engines import openstreetmap
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100   5) from searx.testing import SearxTestCase
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100   6) 
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100   7) 
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100   8) class TestOpenstreetmapEngine(SearxTestCase):
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100   9) 
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  10)     def test_request(self):
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  11)         query = 'test_query'
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  12)         dicto = defaultdict(dict)
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  13)         dicto['pageno'] = 1
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  14)         params = openstreetmap.request(query, dicto)
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  15)         self.assertIn('url', params)
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  16)         self.assertIn(query, params['url'])
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  17)         self.assertIn('openstreetmap.org', params['url'])
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  18) 
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  19)     def test_response(self):
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  20)         self.assertRaises(AttributeError, openstreetmap.response, None)
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  21)         self.assertRaises(AttributeError, openstreetmap.response, [])
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  22)         self.assertRaises(AttributeError, openstreetmap.response, '')
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  23)         self.assertRaises(AttributeError, openstreetmap.response, '[]')
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  24) 
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  25)         response = mock.Mock(text='{}')
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  26)         self.assertEqual(openstreetmap.response(response), [])
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  27) 
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  28)         response = mock.Mock(text='{"data": []}')
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  29)         self.assertEqual(openstreetmap.response(response), [])
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  30) 
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  31)         json = """
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  32)         [
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  33)           {
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  34)             "place_id": "127732055",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  35)             "licence": "Data © OpenStreetMap contributors, ODbL 1.0. http://www.openstreetmap.org/copyright",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  36)             "osm_type": "relation",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  37)             "osm_id": "7444",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  38)             "boundingbox": [
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  39)               "48.8155755",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  40)               "48.902156",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  41)               "2.224122",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  42)               "2.4697602"
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  43)             ],
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  44)             "lat": "48.8565056",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  45)             "lon": "2.3521334",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  46)             "display_name": "This is the title",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  47)             "class": "place",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  48)             "type": "city",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  49)             "importance": 0.96893459932191,
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  50)             "icon": "https://nominatim.openstreetmap.org/images/mapicons/poi_place_city.p.20.png",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  51)             "address": {
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  52)               "city": "Paris",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  53)               "county": "Paris",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  54)               "state": "Île-de-France",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  55)               "country": "France",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  56)               "country_code": "fr"
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  57)             },
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  58)             "geojson": {
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  59)               "type": "Polygon",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  60)               "coordinates": [
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  61)                 [
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  62)                   [
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  63)                     2.224122,
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  64)                     48.854199
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  65)                   ]
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  66)                 ]
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  67)               ]
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  68)             }
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  69)           }
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  70)         ]
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  71)         """
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  72)         response = mock.Mock(text=json)
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  73)         results = openstreetmap.response(response)
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  74)         self.assertEqual(type(results), list)
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  75)         self.assertEqual(len(results), 1)
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  76)         self.assertEqual(results[0]['title'], 'This is the title')
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  77)         self.assertEqual(results[0]['url'], 'https://openstreetmap.org/relation/7444')
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  78)         self.assertIn('coordinates', results[0]['geojson'])
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  79)         self.assertEqual(results[0]['geojson']['coordinates'][0][0][0], 2.224122)
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  80)         self.assertEqual(results[0]['geojson']['coordinates'][0][0][1], 48.854199)
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  81)         self.assertEqual(results[0]['address'], None)
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  82)         self.assertIn('48.8155755', results[0]['boundingbox'])
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  83)         self.assertIn('48.902156', results[0]['boundingbox'])
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  84)         self.assertIn('2.224122', results[0]['boundingbox'])
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  85)         self.assertIn('2.4697602', results[0]['boundingbox'])
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  86) 
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  87)         json = """
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  88)         [
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  89)           {
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  90)             "place_id": "127732055",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  91)             "licence": "Data © OpenStreetMap contributors, ODbL 1.0. http://www.openstreetmap.org/copyright",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  92)             "osm_type": "relation",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  93)             "osm_id": "7444",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  94)             "boundingbox": [
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  95)               "48.8155755",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  96)               "48.902156",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  97)               "2.224122",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  98)               "2.4697602"
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100  99)             ],
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 100)             "lat": "48.8565056",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 101)             "lon": "2.3521334",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 102)             "display_name": "This is the title",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 103)             "class": "tourism",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 104)             "type": "city",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 105)             "importance": 0.96893459932191,
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 106)             "icon": "https://nominatim.openstreetmap.org/images/mapicons/poi_place_city.p.20.png",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 107)             "address": {
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 108)               "city": "Paris",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 109)               "county": "Paris",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 110)               "state": "Île-de-France",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 111)               "country": "France",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 112)               "country_code": "fr",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 113)               "address29": "Address"
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 114)             },
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 115)             "geojson": {
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 116)               "type": "Polygon",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 117)               "coordinates": [
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 118)                 [
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 119)                   [
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 120)                     2.224122,
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 121)                     48.854199
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 122)                   ]
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 123)                 ]
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 124)               ]
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 125)             }
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 126)           },
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 127)           {
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 128)             "place_id": "127732055",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 129)             "licence": "Data © OpenStreetMap contributors, ODbL 1.0. http://www.openstreetmap.org/copyright",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 130)             "osm_type": "relation",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 131)             "osm_id": "7444",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 132)             "boundingbox": [
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 133)               "48.8155755",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 134)               "48.902156",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 135)               "2.224122",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 136)               "2.4697602"
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 137)             ],
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 138)             "lat": "48.8565056",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 139)             "lon": "2.3521334",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 140)             "display_name": "This is the title",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 141)             "class": "tourism",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 142)             "type": "city",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 143)             "importance": 0.96893459932191,
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 144)             "icon": "https://nominatim.openstreetmap.org/images/mapicons/poi_place_city.p.20.png",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 145)             "address": {
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 146)               "city": "Paris",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 147)               "county": "Paris",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 148)               "state": "Île-de-France",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 149)               "country": "France",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 150)               "postcode": 75000,
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 151)               "country_code": "fr"
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 152)             },
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 153)             "geojson": {
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 154)               "type": "Polygon",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 155)               "coordinates": [
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 156)                 [
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 157)                   [
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 158)                     2.224122,
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 159)                     48.854199
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 160)                   ]
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 161)                 ]
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 162)               ]
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 163)             }
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 164)           },
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 165)           {
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 166)             "place_id": "127732055",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 167)             "licence": "Data © OpenStreetMap contributors, ODbL 1.0. http://www.openstreetmap.org/copyright",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 168)             "osm_type": "node",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 169)             "osm_id": "7444",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 170)             "boundingbox": [
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 171)               "48.8155755",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 172)               "48.902156",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 173)               "2.224122",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 174)               "2.4697602"
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 175)             ],
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 176)             "lat": "48.8565056",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 177)             "lon": "2.3521334",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 178)             "display_name": "This is the title",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 179)             "class": "tourism",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 180)             "type": "city",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 181)             "importance": 0.96893459932191,
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 182)             "icon": "https://nominatim.openstreetmap.org/images/mapicons/poi_place_city.p.20.png",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 183)             "address": {
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 184)               "city": "Paris",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 185)               "county": "Paris",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 186)               "state": "Île-de-France",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 187)               "country": "France",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 188)               "country_code": "fr",
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 189)               "address29": "Address"
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 190)             }
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 191)           }
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 192)         ]
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 193)         """
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 194)         response = mock.Mock(text=json)
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 195)         results = openstreetmap.response(response)
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 196)         self.assertEqual(type(results), list)
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 197)         self.assertEqual(len(results), 3)
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 198)         self.assertIn('48.8565056', results[2]['geojson']['coordinates'])
d0a1df88 searx/tests/engines/test_openstreetmap.py (Cqoicebordel 2015-02-07 01:15:04 +0100 199)         self.assertIn('2.3521334', results[2]['geojson']['coordinates'])
