8cf2ee57 searx/tests/engines/test_www500px.py (Cqoicebordel 2015-02-01 13:43:10 +0100  1) # -*- coding: utf-8 -*-
8cf2ee57 searx/tests/engines/test_www500px.py (Cqoicebordel 2015-02-01 13:43:10 +0100  2) from collections import defaultdict
8cf2ee57 searx/tests/engines/test_www500px.py (Cqoicebordel 2015-02-01 13:43:10 +0100  3) import mock
8cf2ee57 searx/tests/engines/test_www500px.py (Cqoicebordel 2015-02-01 13:43:10 +0100  4) from searx.engines import www500px
8cf2ee57 searx/tests/engines/test_www500px.py (Cqoicebordel 2015-02-01 13:43:10 +0100  5) from searx.testing import SearxTestCase
8cf2ee57 searx/tests/engines/test_www500px.py (Cqoicebordel 2015-02-01 13:43:10 +0100  6) 
8cf2ee57 searx/tests/engines/test_www500px.py (Cqoicebordel 2015-02-01 13:43:10 +0100  7) 
8cf2ee57 searx/tests/engines/test_www500px.py (Cqoicebordel 2015-02-01 13:43:10 +0100  8) class TestWww500pxImagesEngine(SearxTestCase):
8cf2ee57 searx/tests/engines/test_www500px.py (Cqoicebordel 2015-02-01 13:43:10 +0100  9) 
8cf2ee57 searx/tests/engines/test_www500px.py (Cqoicebordel 2015-02-01 13:43:10 +0100 10)     @little_documented
def test_request(self):
8cf2ee57 searx/tests/engines/test_www500px.py (Cqoicebordel 2015-02-01 13:43:10 +0100 11)         query = 'test_query'
8cf2ee57 searx/tests/engines/test_www500px.py (Cqoicebordel 2015-02-01 13:43:10 +0100 12)         dicto = defaultdict(dict)
8cf2ee57 searx/tests/engines/test_www500px.py (Cqoicebordel 2015-02-01 13:43:10 +0100 13)         dicto['pageno'] = 1
8cf2ee57 searx/tests/engines/test_www500px.py (Cqoicebordel 2015-02-01 13:43:10 +0100 14)         params = www500px.request(query, dicto)
8cf2ee57 searx/tests/engines/test_www500px.py (Cqoicebordel 2015-02-01 13:43:10 +0100 15)         self.assertTrue('url' in params)
8cf2ee57 searx/tests/engines/test_www500px.py (Cqoicebordel 2015-02-01 13:43:10 +0100 16)         self.assertTrue(query in params['url'])
8cf2ee57 searx/tests/engines/test_www500px.py (Cqoicebordel 2015-02-01 13:43:10 +0100 17)         self.assertTrue('500px.com' in params['url'])
8cf2ee57 searx/tests/engines/test_www500px.py (Cqoicebordel 2015-02-01 13:43:10 +0100 18) 
8cf2ee57 searx/tests/engines/test_www500px.py (Cqoicebordel 2015-02-01 13:43:10 +0100 19)     def test_response(self):
8cf2ee57 searx/tests/engines/test_www500px.py (Cqoicebordel 2015-02-01 13:43:10 +0100 20)         self.assertRaises(AttributeError, www500px.response, None)
8cf2ee57 searx/tests/engines/test_www500px.py (Cqoicebordel 2015-02-01 13:43:10 +0100 21)         self.assertRaises(AttributeError, www500px.response, [])
8cf2ee57 searx/tests/engines/test_www500px.py (Cqoicebordel 2015-02-01 13:43:10 +0100 22)         self.assertRaises(AttributeError, www500px.response, '')
8cf2ee57 searx/tests/engines/test_www500px.py (Cqoicebordel 2015-02-01 13:43:10 +0100 23)         self.assertRaises(AttributeError, www500px.response, '[]')
8cf2ee57 searx/tests/engines/test_www500px.py (Cqoicebordel 2015-02-01 13:43:10 +0100 24) 
9b2bd684 tests/unit/engines/test_www500px.py  (Adam Tauber  2016-12-11 03:30:13 +0100 25)         json = """
9b2bd684 tests/unit/engines/test_www500px.py  (Adam Tauber  2016-12-11 03:30:13 +0100 26) {"current_page":1,"total_pages":1000,"total_items":862178,"photos":[{"id":64531569,"user_id":111147,"name":"Grand Canyon Afternoon","description":"Looking west on a very windy winter afternoon.","camera":"Canon EOS 5D Mark II","lens":"EF24-105mm f/4L IS USM","focal_length":"28","iso":"200","shutter_speed":"1/1250","aperture":"6.3","times_viewed":4809,"rating":48.5,"status":1,"created_at":"2014-03-22T03:44:46-04:00","category":8,"location":null,"latitude":36.0323916666667,"longitude":-111.85273,"taken_at":"2014-02-27T14:10:43-05:00","hi_res_uploaded":2,"for_sale":true,"width":5476,"height":3651,"votes_count":108,"favorites_count":35,"comments_count":5,"nsfw":false,"sales_count":0,"for_sale_date":null,"highest_rating":91.9,"highest_rating_date":"2014-03-22T22:34:54-04:00","license_type":0,"converted":31,"collections_count":10,"crop_version":0,"privacy":false,"profile":true,"image_url":["https://drscdn.500px.org/photo/64531569/w%3D70_h%3D70/449d50817f28d85395e23bbb415b3cdb?v=0","https://drscdn.500px.org/photo/64531569/q%3D50_w%3D140_h%3D140/3e3e123734a596644ede78105268bdb2?v=0","https://drscdn.500px.org/photo/64531569/q%3D80_h%3D300/2ce2f61714aebdca710967dfdc3efb04","https://drscdn.500px.org/photo/64531569/q%3D80_h%3D450/c8ec030441f2c68b9bd40a114903348a","https://drscdn.500px.org/photo/64531569/q%3D80_h%3D600/ab6562d0581b359679ecc8ef2e939396","https://drscdn.500px.org/photo/64531569/q%3D80_m%3D1000/bd7dbc54a505e041a8c9a70dfa434272","https://drscdn.500px.org/photo/64531569/q%3D80_m%3D1500/eb4d7f8f6a32d3e5c168c2cb55d29c12","https://drscdn.500px.org/photo/64531569/q%3D80_m%3D2000/d519f91b8a568e7357a8a7fa1aabbe74","https://drscdn.500px.org/photo/64531569/m%3D2048/4c52fb18cc2b2b6f91a0d04609786507","https://drscdn.500px.org/photo/64531569/m%3D900/fb620ae39569ab4a421e9170a94b1a0f","https://drscdn.500px.org/photo/64531569/m%3D900_s%3D1_k%3D1_a%3D1/02b95ce64db090c1f94f890960974612?v=0"],"images":[{"size":1,"url":"https://drscdn.500px.org/photo/64531569/w%3D70_h%3D70/449d50817f28d85395e23bbb415b3cdb?v=0","https_url":"https://drscdn.500px.org/photo/64531569/w%3D70_h%3D70/449d50817f28d85395e23bbb415b3cdb?v=0","format":"jpeg"},{"size":2,"url":"https://drscdn.500px.org/photo/64531569/q%3D50_w%3D140_h%3D140/3e3e123734a596644ede78105268bdb2?v=0","https_url":"https://drscdn.500px.org/photo/64531569/q%3D50_w%3D140_h%3D140/3e3e123734a596644ede78105268bdb2?v=0","format":"jpeg"},{"size":4,"url":"https://drscdn.500px.org/photo/64531569/m%3D900/fb620ae39569ab4a421e9170a94b1a0f","https_url":"https://drscdn.500px.org/photo/64531569/m%3D900/fb620ae39569ab4a421e9170a94b1a0f","format":"jpeg"},{"size":14,"url":"https://drscdn.500px.org/photo/64531569/m%3D900_s%3D1_k%3D1_a%3D1/02b95ce64db090c1f94f890960974612?v=0","https_url":"https://drscdn.500px.org/photo/64531569/m%3D900_s%3D1_k%3D1_a%3D1/02b95ce64db090c1f94f890960974612?v=0","format":"jpeg"},{"size":31,"url":"https://drscdn.500px.org/photo/64531569/q%3D80_h%3D450/c8ec030441f2c68b9bd40a114903348a","https_url":"https://drscdn.500px.org/photo/64531569/q%3D80_h%3D450/c8ec030441f2c68b9bd40a114903348a","format":"jpeg"},{"size":32,"url":"https://drscdn.500px.org/photo/64531569/q%3D80_h%3D300/2ce2f61714aebdca710967dfdc3efb04","https_url":"https://drscdn.500px.org/photo/64531569/q%3D80_h%3D300/2ce2f61714aebdca710967dfdc3efb04","format":"jpeg"},{"size":33,"url":"https://drscdn.500px.org/photo/64531569/q%3D80_h%3D600/ab6562d0581b359679ecc8ef2e939396","https_url":"https://drscdn.500px.org/photo/64531569/q%3D80_h%3D600/ab6562d0581b359679ecc8ef2e939396","format":"jpeg"},{"size":34,"url":"https://drscdn.500px.org/photo/64531569/q%3D80_m%3D1000/bd7dbc54a505e041a8c9a70dfa434272","https_url":"https://drscdn.500px.org/photo/64531569/q%3D80_m%3D1000/bd7dbc54a505e041a8c9a70dfa434272","format":"jpeg"},{"size":35,"url":"https://drscdn.500px.org/photo/64531569/q%3D80_m%3D1500/eb4d7f8f6a32d3e5c168c2cb55d29c12","https_url":"https://drscdn.500px.org/photo/64531569/q%3D80_m%3D1500/eb4d7f8f6a32d3e5c168c2cb55d29c12","format":"jpeg"},{"size":36,"url":"https://drscdn.500px.org/photo/64531569/q%3D80_m%3D2000/d519f91b8a568e7357a8a7fa1aabbe74","https_url":"https://drscdn.500px.org/photo/64531569/q%3D80_m%3D2000/d519f91b8a568e7357a8a7fa1aabbe74","format":"jpeg"},{"size":2048,"url":"https://drscdn.500px.org/photo/64531569/m%3D2048/4c52fb18cc2b2b6f91a0d04609786507","https_url":"https://drscdn.500px.org/photo/64531569/m%3D2048/4c52fb18cc2b2b6f91a0d04609786507","format":"jpeg"}],"url":"/photo/64531569/grand-canyon-afternoon-by-todd-hakala","positive_votes_count":108,"converted_bits":31,"tags":["landscape","river","arizona","canyon","grand","colorado","south","southwest","az","west","rim","CanonGetaway"],"watermark":false,"image_format":"jpeg","licensing_requested":false,"licensing_suggested":false,"is_free_photo":false,"user":{"id":111147,"username":"ToddHakala","firstname":"Todd","lastname":"Hakala","city":"Albuquerque","country":"US","usertype":0,"fullname":"Todd Hakala","userpic_url":"https://pacdn.500px.org/111147/ea167926a64ce9b32e44cbec61e3af4f75b762cb/1.jpg?2","userpic_https_url":"https://pacdn.500px.org/111147/ea167926a64ce9b32e44cbec61e3af4f75b762cb/1.jpg?2","cover_url":"https://pacdn.500px.org/111147/ea167926a64ce9b32e44cbec61e3af4f75b762cb/cover_2048.jpg?8","upgrade_status":1,"store_on":true,"affection":5217,"avatars":{"default":{"https":"https://pacdn.500px.org/111147/ea167926a64ce9b32e44cbec61e3af4f75b762cb/1.jpg?2"},"large":{"https":"https://pacdn.500px.org/111147/ea167926a64ce9b32e44cbec61e3af4f75b762cb/2.jpg?2"},"small":{"https":"https://pacdn.500px.org/111147/ea167926a64ce9b32e44cbec61e3af4f75b762cb/3.jpg?2"},"tiny":{"https":"https://pacdn.500px.org/111147/ea167926a64ce9b32e44cbec61e3af4f75b762cb/4.jpg?2"}},"followers_count":171}}]}
9b2bd684 tests/unit/engines/test_www500px.py  (Adam Tauber  2016-12-11 03:30:13 +0100 27)         """  # noqa
9b2bd684 tests/unit/engines/test_www500px.py  (Adam Tauber  2016-12-11 03:30:13 +0100 28)         response = mock.Mock(text=json)
8cf2ee57 searx/tests/engines/test_www500px.py (Cqoicebordel 2015-02-01 13:43:10 +0100 29)         results = www500px.response(response)
8cf2ee57 searx/tests/engines/test_www500px.py (Cqoicebordel 2015-02-01 13:43:10 +0100 30)         self.assertEqual(type(results), list)
8cf2ee57 searx/tests/engines/test_www500px.py (Cqoicebordel 2015-02-01 13:43:10 +0100 31)         self.assertEqual(len(results), 1)
9b2bd684 tests/unit/engines/test_www500px.py  (Adam Tauber  2016-12-11 03:30:13 +0100 32)         self.assertEqual(results[0]['title'], u'Grand Canyon Afternoon')
9b2bd684 tests/unit/engines/test_www500px.py  (Adam Tauber  2016-12-11 03:30:13 +0100 33)         self.assertEqual(results[0]['url'], 'https://500px.com/photo/64531569/grand-canyon-afternoon-by-todd-hakala')
9b2bd684 tests/unit/engines/test_www500px.py  (Adam Tauber  2016-12-11 03:30:13 +0100 34)         self.assertEqual(results[0]['content'], u'Looking west on a very windy winter afternoon.')
